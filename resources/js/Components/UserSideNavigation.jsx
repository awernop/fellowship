import { Link, usePage } from "@inertiajs/react";
import { FollowButton } from "./FollowButton";

export default function UserSideNavigation(){

    const { auth, user: profileUser } = usePage().props; // Получаем текущего пользователя и пользователя профиля
    const currentUser = auth.user;

    // Проверяем, является ли текущий пользователь владельцем страницы
    const isOwner = currentUser && profileUser && currentUser.id === profileUser.id;

    return (
        <div className='w-full'>
        <div>
        <div className="w-60 flex-shrink-0 p-6 sticky top-0 border-b">
                    <div className="flex flex-col items-center justify-center mt-3">
                        {profileUser?.path_img && (
                            <img
                                src={`/images/${profileUser.path_img}`}
                                alt="user pfp"
                                className="w-[100px] mb-1"
                            />
                        )}
                        <div className="flex flex-col items-center mb-2">
                            <span className="text-[22px] font-semibold select-none">{profileUser.username}</span>
                            <span className="text-[18px] mt-[-4px] select-none">@{profileUser.login}</span>
                        </div>
                        <div className="mt-2">
                            {profileUser?.tags?.length > 0 ? (
                                <div className="flex items-center justify-center flex-wrap gap-2">
                                    {profileUser.tags.map((tag) => (
                                        <span
                                            key={tag.id}
                                            className="px-3 py-1 bg-[#EEEDFF] text-flower text-sm font-medium rounded-full"
                                        >
                                            {tag.title}
                                        </span>
                                    ))}
                                </div>
                            ) : (
                                <p className="text-gray-500 text-sm">Пользователь не указал теги</p>
                            )}
                        </div>
                    </div>
                </div>
                <div className='w-full px-3 pb-3'>
                {isOwner ? (
                    <div className="mt-3">
                        <Link href={route('users.posts', { login: profileUser.login })} className='flex items-center gap-3 w-full px-4 py-2 text-start text-[15px] rounded-md leading-5 text-gray-700 transition duration-150 ease-in-out focus:outline-none  hover:bg-gray-100 focus:bg-gray-100 cursor-pointer'>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M20 17.5C20 19.985 20 22 12 22C4 22 4 19.985 4 17.5C4 15.015 7.582 13 12 13C16.418 13 20 15.015 20 17.5Z" fill="#2A303E" />
  <path d="M12 2V2C12.5146 4.51777 14.4822 6.48539 17 7V7V7C14.4822 7.51461 12.5146 9.48223 12 12V12V12C11.4854 9.48223 9.51777 7.51461 7 7V7V7C9.51777 6.48539 11.4854 4.51777 12 2V2Z" fill="#2A303E" />
</svg>
                Мой профиль
            </Link>
            <Link href={route('archive')} className='flex items-center gap-3 w-full px-4 py-2 text-start text-[15px] rounded-md leading-5 text-gray-700 transition duration-150 ease-in-out focus:outline-none  hover:bg-gray-100 focus:bg-gray-100 cursor-pointer'>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M5 21C4.45 21 3.97933 20.8043 3.588 20.413C3.19667 20.0217 3.00067 19.5507 3 19V6.52501C3 6.29167 3.03767 6.06667 3.113 5.85001C3.18833 5.63334 3.30067 5.43334 3.45 5.25001L4.7 3.72501C4.88333 3.49167 5.11233 3.31234 5.387 3.18701C5.66167 3.06167 5.94933 2.99934 6.25 3.00001H17.75C18.05 3.00001 18.3377 3.06267 18.613 3.18801C18.8883 3.31334 19.1173 3.49234 19.3 3.72501L20.55 5.25001C20.7 5.43334 20.8127 5.63334 20.888 5.85001C20.9633 6.06667 21.0007 6.29167 21 6.52501V19C21 19.55 20.8043 20.021 20.413 20.413C20.0217 20.805 19.5507 21.0007 19 21H5ZM5.4 6.00001H18.6L17.75 5.00001H6.25L5.4 6.00001ZM12 10C11.7167 10 11.4793 10.096 11.288 10.288C11.0967 10.48 11.0007 10.7173 11 11V14.2L10.1 13.3C9.91667 13.1167 9.68333 13.025 9.4 13.025C9.11667 13.025 8.88333 13.1167 8.7 13.3C8.51667 13.4833 8.425 13.7167 8.425 14C8.425 14.2833 8.51667 14.5167 8.7 14.7L11.3 17.3C11.5 17.5 11.7333 17.6 12 17.6C12.2667 17.6 12.5 17.5 12.7 17.3L15.3 14.7C15.4833 14.5167 15.575 14.2833 15.575 14C15.575 13.7167 15.4833 13.4833 15.3 13.3C15.1167 13.1167 14.8833 13.025 14.6 13.025C14.3167 13.025 14.0833 13.1167 13.9 13.3L13 14.2V11C13 10.7167 12.904 10.4793 12.712 10.288C12.52 10.0967 12.2827 10.0007 12 10Z" fill="#2A303E" />
</svg>
                Архив
            </Link>
            <Link href={route('user.repors')} className='flex items-center gap-3 w-full px-4 py-2 text-start text-[15px] rounded-md leading-5 text-gray-700 transition duration-150 ease-in-out focus:outline-none  hover:bg-gray-100 focus:bg-gray-100 cursor-pointer'>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22.5 8.25C22.5 9.13642 22.3254 10.0142 21.9862 10.8331C21.647 11.6521 21.1498 12.3962 20.523 13.023C19.8962 13.6498 19.1521 14.147 18.3331 14.4862C17.5142 14.8254 16.6364 15 15.75 15C14.8636 15 13.9858 14.8254 13.1669 14.4862C12.3479 14.147 11.6038 13.6498 10.977 13.023C10.3502 12.3962 9.85303 11.6521 9.51381 10.8331C9.17459 10.0142 9 9.13642 9 8.25C9 6.45979 9.71116 4.7429 10.977 3.47703C12.2429 2.21116 13.9598 1.5 15.75 1.5C17.5402 1.5 19.2571 2.21116 20.523 3.47703C21.7888 4.7429 22.5 6.45979 22.5 8.25ZM19.2795 8.781L19.284 8.7765C19.4213 8.6373 19.4988 8.45 19.5 8.2545V8.2455C19.4988 8.04853 19.4201 7.85995 19.281 7.7205L16.281 4.7205C16.2114 4.65077 16.1287 4.59543 16.0377 4.55766C15.9466 4.51988 15.8491 4.5004 15.7505 4.50033C15.652 4.50026 15.5544 4.5196 15.4633 4.55725C15.3722 4.5949 15.2895 4.65012 15.2197 4.71975C15.0789 4.86038 14.9997 5.0512 14.9996 5.25022C14.9994 5.44924 15.0784 5.64017 15.219 5.781L16.9395 7.5H12.75C12.5511 7.5 12.3603 7.57902 12.2197 7.71967C12.079 7.86032 12 8.05109 12 8.25C12 8.44891 12.079 8.63968 12.2197 8.78033C12.3603 8.92098 12.5511 9 12.75 9H16.9395L15.219 10.719C15.0782 10.8598 14.9991 11.0508 14.9991 11.25C14.9991 11.4492 15.0782 11.6402 15.219 11.781C15.3598 11.9218 15.5508 12.0009 15.75 12.0009C15.9492 12.0009 16.1402 11.9218 16.281 11.781L19.2795 8.781ZM15.75 16.5C18.54 16.5 21.0075 15.1155 22.5 12.9945V14.25C22.5 14.7425 22.403 15.2301 22.2145 15.6851C22.0261 16.14 21.7499 16.5534 21.4017 16.9017C21.0534 17.2499 20.64 17.5261 20.1851 17.7145C19.7301 17.903 19.2425 18 18.75 18H13.032L8.4375 22.02C8.22491 22.2059 7.96328 22.3265 7.68391 22.3676C7.40454 22.4087 7.11925 22.3685 6.86214 22.2517C6.60504 22.1349 6.38701 21.9466 6.23412 21.7092C6.08123 21.4718 5.99995 21.1954 6 20.913V18H5.25C4.25544 18 3.30161 17.6049 2.59835 16.9017C1.89509 16.1984 1.5 15.2446 1.5 14.25V6.75C1.5 5.75544 1.89509 4.80161 2.59835 4.09835C3.30161 3.39509 4.25544 3 5.25 3H9.3855C8.38984 4.20693 7.75791 5.6721 7.56344 7.22458C7.36896 8.77706 7.61997 10.3528 8.28717 11.7681C8.95437 13.1833 10.0103 14.3796 11.3316 15.2174C12.653 16.0553 14.1854 16.5001 15.75 16.5Z" fill="#2A303E" />
</svg>
                Мои отклики
            </Link>
            <Link href={route('user.reportsposts')} className='flex items-center gap-3 w-full px-4 py-2 text-start text-[15px] rounded-md leading-5 text-gray-700 transition duration-150 ease-in-out focus:outline-none  hover:bg-gray-100 focus:bg-gray-100 cursor-pointer'>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22.5 8.25C22.5 9.13642 22.3254 10.0142 21.9862 10.8331C21.647 11.6521 21.1498 12.3962 20.523 13.023C19.8962 13.6498 19.1521 14.147 18.3331 14.4862C17.5142 14.8254 16.6364 15 15.75 15C14.8636 15 13.9858 14.8254 13.1669 14.4862C12.3479 14.147 11.6038 13.6498 10.977 13.023C10.3502 12.3962 9.85303 11.6521 9.51381 10.8331C9.17459 10.0142 9 9.13642 9 8.25C9 6.45979 9.71116 4.7429 10.977 3.47703C12.2429 2.21116 13.9598 1.5 15.75 1.5C17.5402 1.5 19.2571 2.21116 20.523 3.47703C21.7888 4.7429 22.5 6.45979 22.5 8.25ZM12.2205 7.719L12.216 7.7235C12.0787 7.8627 12.0012 8.05 12 8.2455V8.2545C12.0012 8.45147 12.0799 8.64005 12.219 8.7795L15.219 11.7795C15.2886 11.8492 15.3713 11.9046 15.4623 11.9423C15.5534 11.9801 15.6509 11.9996 15.7495 11.9997C15.848 11.9997 15.9456 11.9804 16.0367 11.9427C16.1278 11.9051 16.2105 11.8499 16.2803 11.7802C16.35 11.7106 16.4053 11.6279 16.4431 11.5369C16.4809 11.4459 16.5003 11.3483 16.5004 11.2498C16.5005 11.1512 16.4811 11.0536 16.4435 10.9626C16.4059 10.8715 16.3506 10.7887 16.281 10.719L14.5605 9H18.75C18.9489 9 19.1397 8.92098 19.2803 8.78033C19.421 8.63968 19.5 8.44891 19.5 8.25C19.5 8.05109 19.421 7.86032 19.2803 7.71967C19.1397 7.57902 18.9489 7.5 18.75 7.5H14.5605L16.281 5.781C16.4218 5.64017 16.5009 5.44916 16.5009 5.25C16.5009 5.05084 16.4218 4.85983 16.281 4.719C16.1402 4.57817 15.9492 4.49905 15.75 4.49905C15.5508 4.49905 15.3598 4.57817 15.219 4.719L12.2205 7.719ZM15.75 16.5C18.54 16.5 21.0075 15.1155 22.5 12.9945V14.25C22.5 14.7425 22.403 15.2301 22.2145 15.6851C22.0261 16.14 21.7499 16.5534 21.4017 16.9017C21.0534 17.2499 20.64 17.5261 20.1851 17.7145C19.7301 17.903 19.2425 18 18.75 18H13.032L8.4375 22.02C8.22491 22.2059 7.96328 22.3265 7.68391 22.3676C7.40454 22.4087 7.11925 22.3685 6.86214 22.2517C6.60504 22.1349 6.38701 21.9466 6.23412 21.7092C6.08123 21.4718 5.99995 21.1954 6 20.913V18H5.25C4.25544 18 3.30161 17.6049 2.59835 16.9017C1.89509 16.1984 1.5 15.2446 1.5 14.25V6.75C1.5 5.75544 1.89509 4.80161 2.59835 4.09835C3.30161 3.39509 4.25544 3 5.25 3H9.3855C8.38984 4.20693 7.75791 5.6721 7.56344 7.22458C7.36896 8.77706 7.61997 10.3528 8.28717 11.7681C8.95437 13.1833 10.0103 14.3796 11.3316 15.2174C12.653 16.0553 14.1854 16.5001 15.75 16.5Z" fill="#2A303E" />
</svg>
                Отклики на мои посты
            </Link>
                    </div>
                ) : (
                    <div>
                        <FollowButton userId={profileUser.id}/>
                    </div>
                )}
            
        </div>    
        </div>
        </div>
    )
}